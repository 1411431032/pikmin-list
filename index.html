<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>çš®å…‹æ•é£¾å“æ”¶é›†åœ–é‘‘</title>
<style>
.cell-btn { touch-action: manipulation; }
:root { --primary: #4caf50; --growing: #fff9c4; --done: #c8e6c9; }
body { font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; background-color: #f4f7f4; margin: 0; padding: 10px; }
h2 { color: #2e7d32; text-align: center; margin-bottom: 5px; }

.legend { display: flex; justify-content: center; gap: 15px; margin-bottom: 10px; font-size: 0.85rem; }
.legend-item { display: flex; align-items: center; gap: 4px; }
.box { width: 16px; height: 16px; border: 1px solid #ccc; border-radius: 3px; }

.table-container { overflow-x: auto; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-height: 75vh; }
table { width: 100%; border-collapse: collapse; min-width: 700px; table-layout: fixed; }

th, td { border: 1px solid #eee; text-align: center; height: 44px; padding: 0; box-sizing: border-box; }
th { background: var(--primary); color: white; position: sticky; top: 0; z-index: 10; font-size: 0.9rem; }
td:first-child {
width: 160px; background: #fafafa; font-weight: bold; font-size: 0.8rem;
position: sticky; left: 0; z-index: 5; border-right: 2px solid #ddd;
padding: 0 8px; text-align: left;
}

.cell-btn { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.1rem; touch-action: manipulation; }
.status-0 { background: #fff; }
.status-1 { background: var(--growing); }
.status-2 { background: var(--done); }
.null-cell { background: #e0e0e0; color: #999; cursor: not-allowed; font-size: 0.65rem; }

/* æŒ‰éˆ•å€æ¨£å¼ */
.btn-group { display: flex; justify-content: center; gap: 10px; margin: 20px 0; flex-wrap: wrap; }
.action-btn { padding: 10px 16px; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 0.9rem; }
.export-btn { background: #2196F3; } /* è—è‰² */
.import-btn { background: #ff9800; } /* æ©˜è‰² */
.reset-btn { background: #ff5252; } /* ç´…è‰² */
</style>
</head>
<body>

<h2>ğŸŒ± çš®å…‹æ•é£¾å“æ”¶é›†åœ–é‘‘</h2>

<div class="legend">
<div class="legend-item"><div class="box" style="background:white"></div> æœªç²å¾—</div>
<div class="legend-item"><div class="box" style="background:var(--growing)"></div> åŸ¹è‚²ä¸­</div>
<div class="legend-item"><div class="box" style="background:var(--done)"></div> âœ… å·²å®Œæˆ</div>
</div>

<div class="table-container">
<table>
<thead>
<tr id="headerRow">
<th>é£¾å“åˆ†é¡</th>
<th>ç´…</th><th>é»ƒ</th><th>è—</th><th>ç´«</th><th>ç™½</th><th>å²©</th><th>ç²‰</th><th>å†°</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>

<div class="btn-group">
<button class="action-btn export-btn" onclick="exportData()">ğŸ’¾ å°å‡ºå‚™ä»½æª”</button>
<input type="file" id="fileInput" style="display:none" onchange="handleImport(this)">
<button class="action-btn import-btn" onclick="document.getElementById('fileInput').click()">ğŸ“‚ å°å…¥å‚™ä»½æª”</button>
<button class="action-btn reset-btn" onclick="clearData()">âš ï¸ é‡è¨­è³‡æ–™</button>
</div>


<script>
const decorData = [
{ name: "é¤å»³ å»šå¸«å¸½å­", avail: [1,1,1,1,1,1,1,1] },
{ name: "å’–å•¡å»³ å’–å•¡æ¯", avail: [1,1,1,1,1,1,1,null] },
{ name: "ç”œé»åº— é¦¬å¡é¾", avail: [1,1,1,1,1,1,1,null] },
{ name: "ç”œé»åº— ç”œç”œåœˆ", avail: [1,1,1,1,1,1,1,null] },
{ name: "é›»å½±é™¢ çˆ†ç±³èŠ±", avail: [1,1,1,1,1,1,1,null] },
{ name: "è—¥å±€ ç‰™åˆ·", avail: [1,1,1,1,1,1,1,null] },
{ name: "å‹•ç‰©åœ’ è’²å…¬è‹±", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ£®æ— é¬å½¢èŸ²", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ£®æ— æ©¡æ —", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ°´é‚Š æ“¬é¤Œ", avail: [1,1,1,1,1,1,1,null] },
{ name: "éƒµå±€ éƒµç¥¨", avail: [1,1,1,1,1,1,1,null] },
{ name: "ç¾è¡“é¤¨ ç•«æ¡†", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ©Ÿå ´ é£›æ©Ÿ", avail: [1,1,1,1,1,1,1,null] },
{ name: "è»Šç«™ é›»è»Š", avail: [1,1,1,1,1,1,1,null] },
{ name: "è»Šç«™ ç¥¨åˆ¸", avail: [1,1,1,1,1,1,1,null] },
{ name: "æµ·ç˜ è²æ®¼", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ¼¢å ¡åº— æ¼¢å ¡", avail: [1,1,1,1,1,1,1,null] },
{ name: "ä¾¿åˆ©åº— ç“¶è“‹", avail: [1,1,1,1,1,1,1,null] },
{ name: "ä¾¿åˆ©åº— é›¶é£Ÿ", avail: [1,1,1,1,1,1,1,null] },
{ name: "è¶…å¸‚ è˜‘è‡", avail: [1,1,1,1,1,1,1,null] },
{ name: "è¶…å¸‚ é¦™è•‰", avail: [1,1,1,1,1,1,1,null] },
{ name: "éºµåŒ…åº— æ³•åœ‹éºµåŒ…", avail: [1,1,1,1,1,1,1,null] },
{ name: "ç¾å®¹é™¢ å‰ªåˆ€", avail: [1,1,1,1,1,1,1,null] },
{ name: "æœé£¾åº— é«®åœˆ", avail: [1,1,1,1,1,1,1,null] },
{ name: "å…¬åœ’ å¹¸é‹è‰", avail: [1,1,1,1,1,1,1,null] },
{ name: "åœ–æ›¸é¤¨ è¿·ä½ æ›¸", avail: [1,1,1,1,1,1,1,null] },
{ name: "è·¯é‚Š ç¶ è‰²è²¼ç´™", avail: [1,1,1,1,1,1,1,1] },
{ name: "è·¯é‚Š è—è‰²è²¼ç´™", avail: [1,1,1,1,1,1,1,1] },
{ name: "è·¯é‚Š é»ƒè‰²è²¼ç´™", avail: [1,1,1,1,1,1,1,1] },
{ name: "è·¯é‚Š é‡‘å¹£è²¼ç´™", avail: [1,1,1,1,1,1,1,1] },
{ name: "å£½å¸é¤å»³ å£½å¸", avail: [1,1,1,1,1,1,1,null] },
{ name: "å±±ä¸˜ å±±ä¸˜åˆ¥é‡", avail: [1,1,1,1,1,1,1,1] },
{ name: "é«”è‚²é¤¨ é‘°åŒ™åœˆ", avail: [1,1,1,1,1,1,1,1] },
{ name: "é›¨å¤© è‘‰å­å¸½", avail: [null,null,1,null,null,null,null,null] },
{ name: "ä¸‹é›ª é›ª", avail: [null,null,1,null,1,null,null,1] },
{ name: "ä¸»é¡Œæ¨‚åœ’ é–€ç¥¨1", avail: [1,1,1,null,null,null,null,null] },
{ name: "ä¸»é¡Œæ¨‚åœ’ é–€ç¥¨2", avail: [1,1,1,null,null,null,null,null] },
{ name: "å…¬è»Šç«™ å…¬è»Š", avail: [1,1,1,1,1,1,1,null] },
{ name: "ç¾©å¼é¤å»³ æŠ«è–©", avail: [1,1,1,1,1,1,1,null] },
{ name: "ç¾©å¼é¤å»³ ç¾©å¤§åˆ©éºµ", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ‹‰éºµåº— é‘°åŒ™åœˆ", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ©‹æ¨‘ åˆ¥é‡", avail: [1,1,1,1,1,1,1,null] },
{ name: "é£¯åº— é£¯åº—å‚™å“", avail: [1,1,1,1,1,1,1,null] },
{ name: "åŒ–å¦å“å•†åº— åŒ–å¦å“", avail: [1,1,1,1,1,1,1,null] },
{ name: "ç¥ç¤¾å’Œå¯ºå»Ÿ é‹å‹¢", avail: [1,1,1,1,1,1,1,null] },
{ name: "é›»å™¨è¡Œ é›»æ± ", avail: [null,1,null,null,null,null,null,null] },
{ name: "é›»å™¨è¡Œ ä»™å¥³ç‡ˆ", avail: [null,1,null,null,null,null,null,null] },
{ name: "å’–å“©é¤å»³ ä¸€ç¢—å’–å“©", avail: [1,1,1,1,1,1,1,null] },
{ name: "äº”é‡‘è¡Œ å·¥å…·", avail: [1,1,1,1,1,1,1,null] },
{ name: "å¤§å­¸&å­¸é™¢", avail: [1,1,1,null,null,null,null,null] },
{ name: "å¢¨è¥¿å“¥é¤å»³ å¡”å¯é¤…", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ´—è¡£åº—&ä¹¾æ´—åº— ç”¨å“", avail: [1,1,1,1,1,1,1,null] },
{ name: "éŸ“åœ‹é¤å»³ éŸ“åœ‹æ³¡èœ", avail: [null,null,null,1,null,null,null,null] },
{ name: "ç‘ªåˆ©æ­å¸½å­", avail: [null,null,1,null,null,null,null,null] },
{ name: "é€£æŒ‡æ‰‹å¥—", avail: [1,1,1,1,1,1,1,null] },
{ name: "æ‹¼åœ–:2021å¹´ç§‹å¤©çš„å›æ†¶", avail: [1,1,1,1,1,1,1,null] },
{ name: "ä¸‰é€±å¹´ç´€å¿µæ¯å­è›‹ç³•", avail: [1,1,1,1,1,1,1,null] },
{ name: "è£é£¾çƒ", avail: [1,1,1,1,1,1,1,null] },
{ name: "å››é€±å¹´ç´€å¿µç¹èŠ±ç¦®ç›’", avail: [1,1,1,1,1,1,1,1] },
{ name: "å››é€±å¹´ç´€å¿µé›¶é£Ÿ", avail: [1,1,1,1,1,1,1,null] },
{ name: "2025è£é£¾", avail: [1,1,1,1,1,1,1,1] },
{ name: "å¥¶å˜´", avail: [1,null,null,null,null,null,null,null] },
{ name: "æ—¥å¼å¹´èœ ä¸–ç•Œå¹´èœ", avail: [1,1,1,1,1,1,1,1] },
{ name: "é‡‘è‰²é£›æ©Ÿç©å…·", avail: [null,1,null,null,null,null,null,null] }
];

const tableBody = document.getElementById('tableBody');

// åˆå§‹åŒ–è¡¨æ ¼
decorData.forEach((decor, rowIndex) => {
const tr = document.createElement('tr');
tr.innerHTML = `<td>${decor.name}</td>`;

decor.avail.forEach((isAvail, colIndex) => {
const td = document.createElement('td');
const cellId = `v4-${rowIndex}-${colIndex}`;

if (isAvail === null) {
td.innerText = "null";
td.className = "null-cell";
} else {
const btn = document.createElement('div');
btn.id = cellId;
btn.className = "cell-btn status-0";
btn.dataset.state = 0;
btn.onclick = function() {
let next = (parseInt(this.dataset.state) + 1) % 3;
updateCell(this, next);
saveData();
};
td.appendChild(btn);
}
tr.appendChild(td);
});
tableBody.appendChild(tr);
});

function updateCell(el, state) {
el.dataset.state = state;
el.className = `cell-btn status-${state}`;
if (state == 0) el.innerText = "";
else if (state == 1) el.innerText = "";
else if (state == 2) el.innerText = "âœ…";
}

function saveData() {
const states = {};
document.querySelectorAll('.cell-btn[id]').forEach(btn => {
states[btn.id] = btn.dataset.state;
});
localStorage.setItem('pikmin_v4_data', JSON.stringify(states));
}

function loadData() {
const saved = localStorage.getItem('pikmin_v4_data');
if (saved) {
const states = JSON.parse(saved);
for (let id in states) {
const el = document.getElementById(id);
if (el) updateCell(el, states[id]);
}
}
}

function clearData() {
if (confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è¨˜éŒ„å—ï¼Ÿ")) {
localStorage.removeItem('pikmin_v4_data');
location.reload();
}
}

// å°å‡ºåŠŸèƒ½ï¼šä¸‹è¼‰å‚™ä»½æª”
function exportData() {
const data = localStorage.getItem('pikmin_v4_data');
if (!data || data === "{}") {
alert("ç›®å‰æ²’æœ‰ç´€éŒ„å¯ä»¥å‚™ä»½å–”ï¼");
return;
}
const blob = new Blob([data], {type: "text/plain"});
const url = URL.createObjectURL(blob);
const a = document.createElement("a");
a.href = url;
a.download = "pikmin_backup_" + new Date().toISOString().slice(0,10) + ".txt";
a.click();
URL.revokeObjectURL(url);
}

// å°å‡ºå‚™ä»½æª” (ä¿æŒä¸è®Šæˆ–æ›´æ–°)
function exportData() {
const data = localStorage.getItem('pikmin_v4_data');
if (!data || data === "{}") {
alert("ç›®å‰æ²’æœ‰ç´€éŒ„å¯ä»¥å‚™ä»½å–”ï¼");
return;
}
const blob = new Blob([data], {type: "text/plain"});
const url = URL.createObjectURL(blob);
const a = document.createElement("a");
a.href = url;
a.download = "pikmin_backup_" + new Date().toISOString().slice(0,10) + ".txt";
a.click();
URL.revokeObjectURL(url);
}

// æ–°å¢ handleImport å‡½æ•¸ä¾†è®€å–æª”æ¡ˆ
function handleImport(input) {
const file = input.files[0];
if (!file) return;

const reader = new FileReader();
reader.onload = function(e) {
const content = e.target.result;
try {
JSON.parse(content); // é©—è­‰æ˜¯å¦ç‚ºæ­£ç¢ºçš„ JSON æ ¼å¼
localStorage.setItem('pikmin_v4_data', content);
alert("å‚™ä»½æª”å°å…¥æˆåŠŸï¼");
location.reload(); // é‡æ–°æ•´ç†ç¶²é é¡¯ç¤ºæ–°é€²åº¦
} catch (err) {
alert("éŒ¯èª¤ï¼šé€™ä¸æ˜¯æœ‰æ•ˆçš„å‚™ä»½æª”å…§å®¹ã€‚");
}
};
reader.readAsText(file);
input.value = ''; // æ¸…é™¤é¸æ“‡ï¼Œæ–¹ä¾¿ä¸‹æ¬¡é‡è¤‡æ“ä½œ
}


window.onload = loadData;
</script>
</body>
</html>



