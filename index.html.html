<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>çš®å…‹æ•å…¨èƒ½æ”¶é›†æ¸…å–®</title>
<style>
:root { --main-bg: #f0f4f0; --card-bg: #ffffff; --primary: #4caf50; --amber: #ffbf00; }
body { font-family: sans-serif; background-color: var(--main-bg); margin: 0; padding: 15px; font-size: 14px; }
h2 { color: #2e7d32; text-align: center; margin-top: 0; }

/* å¾…å®šè¨ˆæ•¸å€ */
.pending-area {
background: var(--card-bg); border-radius: 12px; padding: 15px;
margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.pending-title { font-weight: bold; color: #d32f2f; margin-bottom: 10px; border-bottom: 2px solid #ffcdd2; padding-bottom: 5px; }
.pending-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; }
.pending-card { border: 1px solid #ddd; border-radius: 8px; padding: 8px; background: #fffde7; }
.category-name { font-weight: bold; text-align: center; color: #5d4037; display: block; margin-bottom: 5px; }
.counter-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 3px; }
.btn-sm { width: 24px; height: 24px; border-radius: 4px; border: 1px solid #ccc; background: white; cursor: pointer; font-weight: bold; }
.btn-sm:active { background: #eee; }
.count-val { font-weight: bold; min-width: 15px; text-align: center; }

/* è¡¨æ ¼å€ */
.table-container { overflow-x: auto; background: white; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
table { width: 100%; border-collapse: collapse; min-width: 700px; }
th, td { border: 1px solid #eee; padding: 10px; text-align: center; }
th { background: var(--primary); color: white; position: sticky; top: 0; z-index: 10; }
td:first-child { background: #fafafa; font-weight: bold; position: sticky; left: 0; z-index: 5; border-right: 2px solid #ddd; }

/* ç‹€æ…‹ */
.status-none { background: #fff; cursor: pointer; }
.status-done { background: #c8e6c9; cursor: pointer; font-size: 1.2rem; }
.null-cell { background: #ddd; color: #888; cursor: not-allowed; }

.tip { font-size: 0.8rem; color: #666; text-align: center; margin-bottom: 10px; }
</style>
</head>
<body>

<h2>ğŸŒ± çš®å…‹æ•å…¨èƒ½æ”¶é›†åœ–é‘‘</h2>
<p class="tip">ä¸Šæ–¹è¨˜éŒ„ã€Œå°šæœªé€²åŒ–ã€çš„æ•¸é‡ï¼Œä¸‹æ–¹è¡¨æ ¼è¨˜éŒ„ã€Œå·²ç²å¾—ã€çš„é£¾å“</p>

<div class="pending-area">
<div class="pending-title">ğŸ¯ å¾…å®šè¨ˆæ•¸å™¨ (å°šæœªé€²åŒ–/ä¸çŸ¥é“æ¬¾å¼)</div>
<div class="pending-grid" id="pendingGrid"></div>
</div>

<div class="table-container">
<table>
<thead>
<tr id="headerRow">
<th>é£¾å“åˆ†é¡</th>
<th>ç´…</th><th>é»ƒ</th><th>è—</th><th>ç´«</th><th>ç™½</th><th>ç¾½</th><th>å²©</th><th>èƒ–</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>

<script>
const pikminNames = ['ç´…', 'é»ƒ', 'è—', 'ç´«', 'ç™½', 'ç¾½', 'å²©', 'èƒ–'];

// éœ€è¦è¨ˆæ•¸å™¨çš„åˆ†é¡ (å¤šæ¬¾å¼åœ°é»)
const categories = ["æ£®æ—", "è¶…å¸‚", "è—¥å¦åº—", "è·¯é‚Š", "æ°£è±¡", "é¤å»³", "åœ–æ›¸é¤¨"];
let counts = JSON.parse(localStorage.getItem('pikminCounts')) || {};

// åˆå§‹åŒ–è¨ˆæ•¸å™¨æ•¸æ“š
categories.forEach(cat => {
if (!counts[cat]) counts[cat] = [0, 0, 0, 0, 0, 0, 0, 0];
});

// ç”Ÿæˆè¨ˆæ•¸å™¨ UI
const pendingGrid = document.getElementById('pendingGrid');
categories.forEach(cat => {
const card = document.createElement('div');
card.className = 'pending-card';
let rowsHtml = `<span class="category-name">${cat}</span>`;
pikminNames.forEach((name, i) => {
rowsHtml += `
<div class="counter-row">
<span>${name}:</span>
<div>
<button class="btn-sm" onclick="modCount('${cat}', ${i}, -1)">-</button>
<span class="count-val" id="cnt-${cat}-${i}">${counts[cat][i]}</span>
<button class="btn-sm" onclick="modCount('${cat}', ${i}, 1)">+</button>
</div>
</div>`;
});
card.innerHTML = rowsHtml;
pendingGrid.appendChild(card);
});

function modCount(cat, idx, delta) {
counts[cat][idx] = Math.max(0, counts[cat][idx] + delta);
document.getElementById(`cnt-${cat}-${idx}`).innerText = counts[cat][idx];
localStorage.setItem('pikminCounts', JSON.stringify(counts));
}

// è¡¨æ ¼è³‡æ–™ (å®Œå…¨ä¾ç…§æˆªåœ–æ“´å……)
const decorData = [
{ name: "é¤å»³", avail: [1,1,1,1,1,1,1,1] },
{ name: "å’–å•¡åº—", avail: [1,1,1,null,null,null,null,null] },
{ name: "ç”œé»åº—", avail: [1,1,1,1,1,1,1,1] },
{ name: "é›»å½±é™¢", avail: [1,1,1,null,null,null,null,null] },
{ name: "è—¥å¦åº—", avail: [1,1,null,null,null,null,1,1] },
{ name: "å‹•ç‰©åœ’", avail: [1,1,1,null,null,null,null,null] },
{ name: "æ£®æ—(é¬å½¢èŸ²)", avail: [1,1,1,null,null,null,null,null] },
{ name: "æ£®æ—(æ©¡å¯¦)", avail: [1,1,1,null,null,null,null,null] },
{ name: "æ°´é‚Š", avail: [1,1,1,null,null,null,null,null] },
{ name: "éƒµå±€", avail: [1,1,1,1,1,1,1,1] },
{ name: "ç¾è¡“é¤¨", avail: [1,1,1,1,1,1,1,1] },
{ name: "æ©Ÿå ´", avail: [1,1,1,1,1,1,1,1] },
{ name: "è»Šç«™", avail: [1,1,1,1,1,1,1,1] },
{ name: "æµ·é‚Š", avail: [1,1,1,1,1,1,1,1] },
{ name: "å£½å¸åº—", avail: [1,1,1,null,null,null,null,null] },
{ name: "å±±å²³", avail: [1,1,1,null,null,null,null,null] },
{ name: "é«”è‚²é¤¨", avail: [1,1,1,1,1,1,1,1] },
{ name: "å…¬è»Šç«™", avail: [1,1,1,1,1,1,1,1] },
{ name: "æ°£è±¡(é›¨å¤©)", avail: [null,null,1,null,null,null,null,null] },
{ name: "æ°£è±¡(é›ªå¤©)", avail: [null,null,null,null,null,null,null,1] },
{ name: "ç†é«®åº—", avail: [1,1,1,1,1,1,1,1] },
{ name: "å…¬åœ’", avail: [1,1,1,1,1,1,1,1] },
{ name: "è¶…å¸‚(é¦™è‡)", avail: [1,1,1,null,null,null,null,null] },
{ name: "è¶…å¸‚(é¦™è•‰)", avail: [1,1,1,null,null,null,null,null] },
{ name: "éºµåŒ…åº—", avail: [1,1,1,1,1,1,1,1] },
{ name: "æœé£¾åº—", avail: [1,1,1,1,1,1,1,1] },
{ name: "è·¯é‚Š(ç¶ è‰²)", avail: [1,1,1,1,1,1,1,1] },
{ name: "è·¯é‚Š(è—è‰²)", avail: [1,1,1,1,1,1,1,1] },
{ name: "è·¯é‚Š(æ©™è‰²)", avail: [1,1,1,1,1,1,1,1] }
];

const tableBody = document.getElementById('tableBody');
decorData.forEach((decor, rowIndex) => {
const tr = document.createElement('tr');
tr.innerHTML = `<td>${decor.name}</td>`;
decor.avail.forEach((isAvail, colIndex) => {
const td = document.createElement('td');
const cellId = `c-${rowIndex}-${colIndex}`;
td.id = cellId;
if (isAvail === null) {
td.innerText = "null";
td.className = "null-cell";
} else {
td.className = "status-none";
td.dataset.state = 0;
td.onclick = function() {
let s = (parseInt(this.dataset.state) + 1) % 2;
updateCell(this, s);
saveTable();
};
}
tr.appendChild(td);
});
tableBody.appendChild(tr);
});

function updateCell(el, state) {
el.dataset.state = state;
el.innerText = (state == 1) ? "âœ…" : "";
el.className = (state == 1) ? "status-done" : "status-none";
}

function saveTable() {
const states = {};
document.querySelectorAll('td[id]').forEach(td => { states[td.id] = td.dataset.state; });
localStorage.setItem('pikminTableFinal', JSON.stringify(states));
}

function loadTable() {
const saved = localStorage.getItem('pikminTableFinal');
if (saved) {
const states = JSON.parse(saved);
for (let id in states) {
const td = document.getElementById(id);
if (td) updateCell(td, states[id]);
}
}
}
window.onload = loadTable;
</script>
</body>
</html>